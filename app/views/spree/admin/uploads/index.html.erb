<% content_for :page_title do %>
  <%= t('.listing_uploads') %>
<% end %>

<% content_for :page_actions do %>
  <div class="toolbar" data-hook="toolbar">
    <ul class="actions header-action-links inline-menu">
      <li id="new_upload_link">
        <%= button_link_to t(".new_upload"), new_admin_upload_url, { :remote => true, :icon => 'icon-plus', :id => 'new_image_link' } %>
      </li>
    </ul>
  </div>
<% end %>

<%= render :partial => 'spree/admin/shared/contents_sub_menu' %>

<div id="new_image" data-hook></div>

<% content_for :table_filter_title do %>
  <%= t(:search) %>
<% end %>

<% content_for :table_filter do %>
  <div data-hook="admin_uploads_sidebar">
    
    <%= search_form_for [:admin, @search] do |f| %>

      <%- locals = {:f => f} %>
      <div data-hook="admin_uploads_index_search">
        <div class="omega alpha sixteen columns">
          <div class="field">
            <%= f.label :alt_cont, t("description") %><br />
            <%= f.text_field :alt_cont, :size => 25 %>
          </div>
        </div>
      </div>

      <div class="clear"></div>

      <div class="form-buttons actions filter-actions" data-hook="admin_uploads_index_search_buttons">
        <%= button t(:search), 'icon-search' %>
      </div>
    <% end %>
  </div>
<% end %>

<table class="index responsive" id="listing_uploads" data-hook>
  <thead>
    <tr data-hook="admin_uploads_index_headers">
      <th><%= t("thumbnail") %></th>
      <th><%= sort_link @search, :attachment_file_name, t("upload.file_name") %></th>
      <th><%= sort_link @search, :description, t("description") %></th>
      <th><%= sort_link @search, :attachment_file_size, t("upload.size") %></th>
    </tr>
  </thead>
  
  <tbody>
  <% @uploads.each do |upload| %>
    <tr id="<%= dom_id(upload) %>">
      <td class="thumbnail">
        <% if upload.image_content? %>
          <%= link_to image_tag(upload.attachment.url(:mini)), upload.attachment.url(:large) %>
        <% end %>
      </td>
      <td><%= link_to upload.attachment_file_name, upload.attachment.url(:original) %></td>
      <td><%= upload.alt %></td>
      <td><%= upload.attachment_file_size.to_i / 1024 %> kb</td>
      <td class="actions" data-hook="admin_uploads_index_row_actions">
        <%= link_to_edit upload, :no_text => true, :class => 'edit' %>
        &nbsp;
        <%= link_to_delete upload, :no_text => true %>
      </td>
      <td class="actions">
    </tr>
  <% end %>
  </tbody>
 
</table>

<%= paginate @uploads %>
